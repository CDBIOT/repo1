<html>
<head>
	
<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="css/css.css" />
	<link rel="stylesheet" type="text/css" href="css/reset.css" />
	<script src="user.js"></script>
<title>Cadastro de usuarios</title> 
</head>
<body >
	
<section class="Botoes">
	
<div class="container">
<div class="botao_home">
	<form name="home" action="/" method="get">
		<div class="home_btn">
		<input type="image" src="imagens/blue/home_btn.png" onClick="this.form.submit()">
		</div>
	</form>
</div>
</div>
<img id = "fio" src = "imagens/blue/fio azul.png" >
</section>

<div class = autenticacao >
	
<div class = box>

<form action="/login" method = "post">
	<p></p><label>Login</label></p>	<br>

	<img name="user" src="imagens/blue/user.png" ALT=""></a><br>	<br>
	
	<input type="nome"  	placeholder="Usuario"	id = "nome" name = "nome" 	size="12" ><br><br>
	<input type="password"  placeholder = "Senha" 	id =  "senha" name = "senha0" size="12" > <br>  <br>
	<button type="submit">Login</button>
	
</form>

<button onclick = "window.location.href = 'cad_user.html'" >Cadastre-se</button><br>
</div>
</div>
</body>
<script>

async function autentica() {
 // envio de dados para login
	const dados = {
		"nome": nome, 
		"senha": senha

	}
	const dados_envio = {method: 'POST',mode: 'cors',cache: 'default',
		body: JSON.stringify(dados)
		
	};
	
		fetch('http://127.0.0.1:8081/login',dados_envio)
		.then(response=>response.json())
		.then(response =>{
			console.log(response)
			//const data = JSON.parse(response)
			const token =  response.token;

		//apos recebimento de token do login 
		//envio de token via fetch para header e localStorage

		window.localStorage.setItem =(response.token);
		//myHeaders.append("Authorization", "Bearer " + response.token);

		//myHeaders.append("Authorization", "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYyZWQ4ZmJlY2Y0ODI5M2IwMTc1MTRkZCIsImlhdCI6MTY2MDk1ODg3NH0.oPzUBNWb_3xpisuM5RY7u2uTHl-wH7wSkSJ0aezqqQY");
		//myHeaders.append("Authorization", "Bearer " + localStorage.getItem(token));

		var myHeaders = new Headers();

		const headerss = {
			method: 'POST',
			mode: 'cors',
			cache: 'default',
			headers: myHeaders,
			}

		})
		
		
	.catch(error => console.log('error', error));
		
		}
		
</script>

</html>